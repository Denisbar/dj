<h5 class="section-title"> Current selection: </h5>
<div class="row" style="font-size:smaller; padding:0 1rem 0 1rem; margin:0;">

  <div class="medium container-top" ng-if = "step.conf.dataset" 

    style="font-size: small;
            color: #008CBA;
            border: 1px solid;
            padding: 0.5rem;
            margin: 0.3rem;"
    >
    <label style="color: #008CBA;">
    <b>ID: </b>{{step.conf.dataset.dataset.id}}
    <br/> 
      <b>
      {{
            (step.lookup(step.conf.dataset.dataset.label).label) ? 
              step.lookup(step.conf.dataset.dataset.label).label : 
              step.conf.dataset.dataset.label
              | translate
      }}
      </b> &nbsp;
      <i>
      {{
            (step.lookup(step.conf.dataset.dataset.note).label) ? 
              step.lookup(step.conf.dataset.dataset.note).label : 
              step.conf.dataset.dataset.note
              | translate
      }}
      </i><br/>
      Source:
      {{
            (step.lookup(step.conf.dataset.dataset.source).label) ? 
              step.lookup(step.conf.dataset.dataset.source).label : 
              step.conf.dataset.dataset.source
              | translate
      }} 
      
      &nbsp;
      Updated: {{step.formatDate(step.conf.dataset.dataset.commit.createdAt)}} 
    </label>
  </div>

  
  <h5 class="section-title">
    Available Datasets:
  </h5>
  <div ng-if="step.pending">
    <center><img src="./img/ajax-loader.gif"/></center>
  </div>

  <div style="    padding: 0.5em 0.5em 1em;
                  overflow: auto;
                  height: 20em;
                  border: 0.1rem solid #ddd;">
                  
    <div ng-repeat="item in  step.datasets" style="margin:0 0 1rem 0;">
      <h5 style="font-stretch: ultra-condensed; margin:0;color: #888; font-weight: bold;">
        <span ng-click="step.select(item)" style="cursor:pointer; "ng-class="{selected : item.selected}">
          {{
            (step.lookup(item.dataset.label).label) ? 
              step.lookup(item.dataset.label).label : 
              item.dataset.label
              | translate
          }}
        </span>
      </h5>  

      <div ng-if="!item.collapsed"
           style="margin: 0.2em 0 0.5em 2.5em;
                  padding: 0.5em;
                  border: 0.1rem solid #ddd;
                  background: #f4f4f4;">
        <div style=" font-size: small; text-align: justify;margin:0 0 0 0.1em;">
          <b>
            NOTE
          </b>:&nbsp;&nbsp;
          {{
            (step.lookup(item.dataset.note).label) ? 
              step.lookup(item.dataset.note).label : 
              item.dataset.note
              | translate
          }}
        </div>  
        <div style=" font-size: small; text-align: justify;">
          <b>
            SOURCE
          </b>:&nbsp;&nbsp;
         {{
            (step.lookup(item.dataset.source).label) ? 
              step.lookup(item.dataset.source).label : 
              item.dataset.source
              | translate
          }}
        </div>
        <div style=" font-size: small; text-align: justify;">
          <b>
            LAST UPDATE
          </b>:&nbsp;&nbsp;{{step.formatDate(item.dataset.commit.createdAt)}}  
        </div>
        <!-- <div style=" font-size: small; text-align: justify;">
          <b>
            TOPICS
          </b>:&nbsp;&nbsp;
          <span ng-repeat="topic in prepareTopics(item.dataset.topics)">
            <a ng-click="selectTopic(topic)">
              {{(lookup(topic).label) ? lookup(topic).label : topic | translate}}
            </a>&nbsp;,
          </span>
        </div> -->
      </div>
    </div>
  </div>






<!--   <div ng-show="step.uploaded">
    <center><img src="./img/ajax-loader.gif"/></center>
  </div>
  <div ng-show="!step.uploaded" style="overflow:auto; height:250px;">
    <table>
      <tr>
        <th style="width:3%">&nbsp;</th>
        <th style="width:70%;text-align:center">Note</th>
        <th style="width:25%;text-align:center">Source</th>
        
      </tr>
      <tbody>
        <tr    ng-repeat="d in step.datasets track by $index"
               ng-click = "step.select(d)"
               style="cursor:pointer;margin:0.3rem;padding:0.3rem;border:solid 1px #d8d8d8;"
               ng-class="{selected : d.selected}"
        >
          <td style="text-align:center" ng-class="{selected : d.selected}">{{$index+1}}</td>
          <td ng-class="{selected : d.selected}"><b>{{d.metadata.label}}</b>&nbsp;<i>{{d.metadata.note}}</i></td>
          <td ng-class="{selected : d.selected}">{{d.metadata.source}}</td>
         
        </tr>  
      </tbody>
    </table>
  </div> -->
</div>