<div class="row" style="font-size:smaller; padding:0 1rem 0 1rem; margin:0;">
	<div class="column medium-3 left">
	<h5 class="section-title">Decoration</h5>
		
	<accordion class="wizard">		
		<!-- <titles-control></titles-control> -->


		<accordion close-others="false">
			<accordion-group heading="Input Data">
				<div class="row wizard setting">
					<select ng-model="step.inputQuery" ng-change="step.selectInputData()" class="wizard">
			          <option ng-repeat="item in step.queries">{{item.$title}}</option>
			        </select>
				</div>
			</accordion-group>
		</accordion>	

		<accordion close-others="false">
			<accordion-group heading="Serie Direction">
				<div class="row wizard setting">
			            <label class="wizard left"> 
				        	Direction:
				        </label>
				        <select ng-model="step.conf.query.direction" 
				        		ng-change="step.selectDirection()"	
				        		class="wizard">
				          <option>Rows</option>
				          <option>Columns</option>
				        </select>

				        <button class="button radius right toolbar apply" ng-click="step.apply()">Apply</button>
				</div>        
			</accordion-group>
		</accordion>

		<accordion close-others="false">
			<accordion-group heading="Chart options">
				<div class="row wizard setting">
			            <label class="wizard left"> 
				        	Display Mode:
				        </label>
				        <select ng-model="step.conf.options.displayMode" 
				        		ng-change = "step.selectDisplayMode()"
				        		class="wizard">
				          <option>regions</option>
				          <option>markers</option>
				        </select>
				</div>
				

				<div class="row wizard setting">
			            <label class="wizard left"> 
				        	Color Data:
				        </label>
				        <select ng-model="step.colorColumn" ng-change="step.selectColorDataColumn()" class="wizard">
				         	<option ng-repeat="item in step.columnList">{{item.label}}</option>
				        </select>
				</div>

				<div class="row wizard setting" ng-if="step.conf.options.displayMode == 'markers'">
			            <label class="wizard left"> 
				        	Radius Data:
				        </label>
						<select ng-model="step.radiusColumn" ng-change="step.selectRadiusDataColumn()" class="wizard">
				         	<option ng-repeat="item in step.columnList">{{item.label}}</option>
				        </select>
				</div>

				<div class="row wizard setting">
			            <label class="wizard left"> 
				        	Chart Scope:
				        </label>
				        <select ng-model="step.conf.chartScope" 
				        		ng-change="step.selectChartScope()"	
				        		class="wizard">
				          <option ng-repeat="v in step.chartScopeList">
				          	{{v.value}}
				          </option>
				        </select>
				</div>
				<div class="row wizard setting">
			            <label class="wizard left"> 
				        	Chart Resolution:
				        </label>
				        <select ng-model="step.conf.options.resolution" 
				        		class="wizard">
				          <option>countries</option>
				          <option>provinces</option>
				        </select>
				
				         <button class="button radius right toolbar apply" ng-click="step.apply()">Apply</button>

				</div>

				

			</accordion-group>
		</accordion>	


		<accordion close-others="false">
			<accordion-group heading = "Titles">
				<div class="row wizard setting">
					<label class="wizard left">
						Title
				    </label>
				    <input class="wizard" type="text" ng-model="step.conf.decoration.title">
				    
				    <label class="wizard left">
						Subtitle
				    </label>
				    <input class="wizard" type="text" ng-model="step.conf.decoration.subtitle">
				    
				    <label class="wizard left">
						Caption
				    </label>
				    <input class="wizard" type="text" ng-model="step.conf.decoration.caption">
					 <button class="button radius right toolbar apply" ng-click="step.apply()">Apply</button>
				</div>
			</accordion-group>
		</accordion>

		<accordion close-others="false">	
			<accordion-group heading = "Chart Height">
			    <div class="row wizard setting">
					<input type="number" ng-model="step.conf.options.height" class="wizard">
	        		<button class="button radius right toolbar apply" ng-click="step.apply()">Apply</button>
	        	</div>
	        </accordion-group>
        </accordion>
        
        <accordion close-others="false">
	        <accordion-group heading="Palette">	

				<div class="row wizard setting">
					
					<a class="second dropdown tiny left"
						ng-if="step.conf.decoration.color" 
						dropdown-toggle="#dropdown-example-3" 
						style="margin: 0 0 0 0.3rem;
						padding: 0.3rem 2.5rem 0.3rem 0.5rem;"
					>
	              		<div 	class="button tiny left"
	              				ng-repeat="color in  step.conf.decoration.color"
	                   			style="background-color: {{color}};width:10px;display: inline-block; margin:0;padding:0 0.2rem 0 0.2rem;border:1px solid #afafaf;">
	                		&nbsp;
	              		</div>
	            	</a>
	            	<a class="second dropdown tiny left"
						ng-if="!step.conf.decoration.color" 
						dropdown-toggle="#dropdown-example-3" 
						style="margin: 0 0 0 0.3rem;
						padding: 0.3rem 2.5rem 0.3rem 0.5rem;"
					>
	              		Select Palette
	            	</a>

	            	
	            	<fast-palette-peacker 
	            		dest="step.conf.decoration" 
	            		setter="step.conf.decoration.setColor" 
	            		watch-depth="reference">
	            	</fast-palette-peacker>

	            	
					<label class="wizard left" style="clear:left">
						Reverse
					</label>
					
				 	<div class="switch tiny right">
			          <input type="checkbox"
			                 id="reversePaletteCheckbox"
			                 ng-model="step.conf.decoration.reversePalette"
			                 ng-change = "step.reversePalette()"
			           >
			          <label for="reversePaletteCheckbox"></label>
			        </div>
	 				
	 				<button class="button radius right toolbar apply" ng-click="step.apply()">Apply</button>

	        	</div>
	        </accordion-group>
        </accordion>	
	</div>

	<div class="column medium-9 left">
	<h5 class="section-title">
		<img src="./widgets/v2.query-manager/preparation.png" style="width: 32px;margin: 0 0.3em;"/>
		{{step.inputQuery}}
	</h5>
	<div class="row wizard setting" style="    overflow: auto;
    background: #ffffff;
    max-height: 15em;
    border: 0.1rem solid #ddd;">
		<wdc-table data="{table:step.wizard.context.postprocessedTable, decoration:{}}"></wdc-table>
	</div>
	
	<h5 class="section-title">Chart Preview</h5>
	<div class="row wizard setting" style="overflow:auto;background:#ffffff">
		<div class="border" style="width:{{step.conf.options.width}}px;background:#ffffff;">
			<div>
				<center>
					
					<div class="geochart chartTitle" style="text-align: center;">
						{{step.conf.decoration.title}}
					</div>
					<div class="geochart  chartSubTitle" style="text-align: center;">
						{{step.conf.decoration.subtitle}}
					</div>
					
					<img ng-if="!step.chart" src="./img/ajax-loader.gif"/>

					<div google-chart chart="step.chart" agc-on-ready="fixGoogleCharts(chartWrapper)"></div>
					
					<table ng-if="step.chart.data.length > 0">
						<tr ng-repeat="r in step.chart.data">
							<td ng-repeat="c in r track by $index">
								{{c}}
							</td>
						</tr>
					<table>
					<h2 ng-if="step.chart && !step.chart.data.length" style="color:#ddd">
						Google Geochart Data or Geo Codes not avaible    
					</h2>
					<div class="geochart chartCaption" style="text-align: center;">
						{{step.conf.decoration.caption}}
					</div>
				</center>
			  

			</div>  



		</div>
	</div>
	</div>
</div>
